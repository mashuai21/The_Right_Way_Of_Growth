# 目录挂载

### 现存问题
使用 Docker 运行后，我们改了项目代码不会立刻生效，需要重新build和run，很是麻烦。    
容器里面产生的数据，例如 log 文件，数据库备份文件，容器删除后就丢失了。  

### 几种挂载方式
***bind mount*** 直接把宿主机目录映射到容器内，适合挂代码目录和配置文件。可挂到多个容器上   
***volume*** 由容器创建和管理，创建在宿主机，所以删除容器不会丢失，官方推荐，更高效，Linux 文件系统，适合存储数据库数据。可挂到多个容器上          
***tmpfs mount*** 适合存储临时文件，存宿主机内存中。不可多容器共享。   


### 挂载演示

bind mount 方式用绝对路径 -v D:/code:/app  

volume 方式，只需要一个名字 -v db-data:/app   
示例：
docker run -p 8080:8080 --name test-hello -v D:/code:/app -d test:v1


### volumes与Bind Mount的区别

|不同点|	volumes|	bind mounts|
|:--------------------------------------------:|:--------------------------------------------:|:--------------------------------------------:|
|Source位置|	/var/lib/docker/volumes/…|		可以任意指定|	
|	对已有挂载点影响	|	在容器第一次启动的时候，容器内映射目录的数据复制到volume	|	宿主机路径下的文件，覆盖掉容器内挂载路径文件的内容|	
|	是否支持单个文件映射	|	不支持，只能是目录|		支持|	
|	权限控制|		读写或者只读|		读写或者只读|	
|	移植性|		强，无需指定宿主机文件目录，默认在/var/lib/docker/volumes/目录下|		弱，与宿主机绝对路径强绑定|	
